<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>In-App Browser Detection</title>
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <div class="content">
    <div class="feature-card">
      <h2>üîß Detection Information</h2>
      <p><strong>Browser Detection:</strong> <span id="detection-status">Detecting...</span></p>
      <p><strong>User Agent:</strong> <span id="user-agent" style="word-break: break-all; font-size: 12px;"></span> <button id="copy-ua-btn" onclick="window.copyUserAgent()" style="margin-left: 10px; padding: 5px 10px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 12px;">Copy UA</button></p>

      <div style="margin-top: 14px; font-size: 12px; line-height: 1.6;">
        <p><strong>outerWidth / innerWidth:</strong> <span id="ow">-</span> / <span id="iw">-</span></p>
        <p><strong>outerHeight / innerHeight:</strong> <span id="oh">-</span> / <span id="ih">-</span></p>
        <p><strong>navigator.share exists:</strong> <span id="share-exists">-</span></p>
        <p><strong>display-mode: standalone:</strong> <span id="standalone">-</span></p>
        <p><strong>document.referrer:</strong> <span id="doc-referrer" style="word-break: break-all;">-</span></p>
      </div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
  <script>
    // Fallback: Show error if modules fail to load
    window.addEventListener('error', (e) => {
      if (e.filename && e.filename.includes('main.js')) {
        const statusElement = document.getElementById('detection-status');
        if (statusElement && statusElement.textContent === 'Detecting...') {
          statusElement.innerHTML = '<span style="color: #ff6b6b;">‚ùå Module loading failed. Check console for errors.</span>';
        }
      }
    });

    // Also try to detect after a delay as a fallback
    setTimeout(() => {
      const statusElement = document.getElementById('detection-status');
      if (statusElement && statusElement.textContent === 'Detecting...') {
        console.warn('Detection still showing "Detecting..." - module may not have loaded');
        if (window.appController) {
          console.log('AppController exists, retrying detection...');
          window.appController.detectBrowser();
        } else {
          console.error('AppController not found');
        }
      }
    }, 1000);
  </script>
</body>

</html>